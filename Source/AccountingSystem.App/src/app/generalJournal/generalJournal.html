<layout>
  <div class="row">
    <div class="col-lg-6 col-md-12">
      <div class="card">
        <div class="card-body ">
          <div class="row">
            <div class="col-md-12">
              <h3 class="card-title">查詢</h3>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-12">
              <label>名稱</label>
              <div class="form-group">
                <autocompleteComponent [autocompleteModel]="nameAutocompleteModel"></autocompleteComponent>
              </div>
            </div>
            <div class="col-lg-6 col-md-12">
              <label>會計科目</label>
              <div class="form-group">
                <autocompleteComponent [autocompleteModel]="accountingSubjectAutocompleteModel"></autocompleteComponent>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-12">
              <label>交易日起</label>
              <div class="form-group">
                <input name="tradingDayBegin" class="form-control" angular-mydatepicker [(ngModel)]="conditionForView.tradingDayBegin" 
                       [options]="DatePickerUtility.DatePickerOptions" #tradingDayBegin="angular-mydatepicker" (click)="tradingDayBegin.openCalendar()" />
              </div>
            </div>﻿
            <div class="col-lg-6 col-md-12">
              <label>交易日迄</label>
              <div class="form-group">
                <input name="tradingDayEnd" class="form-control" angular-mydatepicker [(ngModel)]="conditionForView.tradingDayEnd" 
                       [options]="DatePickerUtility.DatePickerOptions" #tradingDayEnd="angular-mydatepicker" (click)="tradingDayEnd.openCalendar()" />
              </div>
            </div>﻿
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-12">
              <label>摘要</label>
              <div class="form-group">
                <input type="text" class="form-control" name="summary" value="" [(ngModel)]="conditionForView.summary" />
              </div>
            </div>﻿
            <div class="col-lg-6 col-md-12" style="text-align: center;">
              <div class="form-group" style="margin-top: 25px">
                <button (click)="filter()" type="submit" class="btn btn-default" style="width:45%">查詢</button>
                <button (click)="clear()" type="reset" class="btn btn-default" style="width:45%">清空</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-6 col-md-12">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-12">
              <h3 class="card-title">新增</h3>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-12">
              <label>日期</label>
              <div class="form-group">
                <input name="tradingDay" class="form-control" angular-mydatepicker [(ngModel)]="detail.tradingDay" 
                       [options]="DatePickerUtility.DatePickerOptions" #tradingDay="angular-mydatepicker" (click)="tradingDay.openCalendar()" />
              </div>
            </div>
            <div class="col-lg-6 col-md-12">
              <label>名稱</label>
              <div class="form-group">
                <input type="text" class="form-control" [(ngModel)]="detail.name" >
              </div>
            </div>
          </div>
          <div class="col-lg-12" style="padding-left:0px; padding-right:0px">
            <div class="form-group">
              <hot-table [hotId]="detail.id"
                         [settings]="handsontableGridSettings"
                         [data]="detail.entrys"
                         licenseKey="non-commercial-and-evaluation">
              </hot-table>
            </div>
          </div>
          <button (click)="save(detail)" type="submit" class="btn btn-default" style="width:100%">送出</button>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-6 col-md-12" *ngFor="let detail of details; let i=index;">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-lg-6 col-md-12">
              <label>日期</label>
              <div class="form-group">
                <input name="tradingDay" class="form-control" angular-mydatepicker [(ngModel)]="detail.tradingDay" 
                       [options]="DatePickerUtility.DatePickerOptions" #tradingDay="angular-mydatepicker" (click)="tradingDay.openCalendar()" />
              </div>
            </div>
            <div class="col-lg-6 col-md-12">
              <label>名稱</label>
              <div class="form-group">
                <input type="text" class="form-control" [(ngModel)]="detail.name" >
              </div>
            </div>
          </div>
          <div class="col-lg-12" style="padding-left:0px; padding-right:0px">
            <div class="form-group">
              <hot-table [hotId]="detail.id"
                         [settings]="handsontableGridSettings"
                         [data]="detail.entrys"
                         licenseKey="non-commercial-and-evaluation">
              </hot-table>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-12">
              <button (click)="save(detail)" type="submit" class="btn btn-default" style="width:100%">送出</button>
            </div>
            <div class="col-lg-6 col-md-12">
              <button (click)="delete(detail)" type="submit" class="btn btn-warning" style="width:100%">刪除</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</layout>
